<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Deccan Palm Admin Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Mobile Menu Button -->
    <button class="mobile-menu-btn" id="mobileMenuBtn"><i class="fas fa-bars"></i></button>

    <!-- Login Form -->
    <div id="loginForm" class="login-container" aria-live="polite">
        <div class="login-card">
            <div class="login-logo">
                <i class="fas fa-palm-tree"></i>
                <h1>Deccan Palm</h1>
            </div>
            <h2>Staff Login</h2>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" class="form-control" placeholder="staff@example.com" required />
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" class="form-control" placeholder="Enter your password" required />
            </div>
            <button id="loginBtn" class="btn btn-primary btn-block">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
            <div id="errorMsg" class="status-msg error-msg" role="alert" aria-atomic="true" style="display: none;"></div>
        </div>
    </div>

    <!-- Discount Admin Login Modal -->
    <div id="discountLoginModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeDiscountModal">Ã—</span>
            <div class="login-logo">
                <i class="fas fa-tag"></i>
                <h1>Discount Admin</h1>
            </div>
            <h2>Discount Section Login</h2>
            <div class="form-group">
                <label for="discountAdminId">User ID</label>
                <input type="text" id="discountAdminId" class="form-control" placeholder="Enter Discount Admin ID" required />
            </div>
            <div class="form-group">
                <label for="discountAdminPassword">Password</label>
                <input type="password" id="discountAdminPassword" class="form-control" placeholder="Enter Password" required />
            </div>
            <button id="discountLoginBtn" class="btn btn-primary btn-block">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
            <div id="discountErrorMsg" class="status-msg error-msg" role="alert" aria-atomic="true" style="display: none;"></div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="adminPanel" style="display:none;">
        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <h2><i class="fas fa-palm-tree"></i> <span>Deccan Palm</span></h2>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" id="dashboardLink" data-page="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="discountsLink" data-page="discounts">
                            <i class="fas fa-tag"></i>
                            <span>Discount Codes</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="remindersLink" data-page="reminders">
                            <i class="fas fa-bell"></i>
                            <span>Reminders</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="reportsLink" data-page="reports">
                            <i class="fas fa-chart-bar"></i>
                            <span>Reports</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" id="settingsLink" data-page="settings">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <header>
                    <div class="header-title">
                        <h1 id="pageTitle">Dashboard</h1>
                        <p id="pageSubtitle">Welcome back! Here's what's happening today.</p>
                    </div>
                    <div class="user-profile">
                        <img src="https://ui-avatars.com/api/?name=Admin&background=FF7043&color=fff" alt="Admin">
                        <div class="user-info">
                            <h4>Admin</h4>
                            <p>Super Admin</p>
                        </div>
                    </div>
                </header>

                <!-- Dashboard Page -->
                <div id="dashboardPage" class="page active">
                    <!-- Stats Cards -->
                    <div class="row" style="display: flex; gap: 20px; margin-bottom: 30px; flex-wrap: wrap;">
                        <div class="card" style="flex: 1; min-width: 250px;">
                            <div class="card-header">
                                <h3><i class="fas fa-users"></i> Total Customers</h3>
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--secondary);" id="totalCustomers">0</div>
                            <p style="color: rgba(255,255,255,0.7);">All time customers</p>
                        </div>
                        <div class="card" style="flex: 1; min-width: 250px;">
                            <div class="card-header">
                                <h3><i class="fas fa-tags"></i> Active Discounts</h3>
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--success);" id="activeDiscounts">0</div>
                            <p style="color: rgba(255,255,255,0.7);">Available for use</p>
                        </div>
                        <div class="card" style="flex: 1; min-width: 250px;">
                            <div class="card-header">
                                <h3><i class="fas fa-check-circle"></i> Used Discounts</h3>
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--danger);" id="usedDiscounts">0</div>
                            <p style="color: rgba(255,255,255,0.7);">Redeemed by customers</p>
                        </div>
                        <div class="card" style="flex: 1; min-width: 250px;">
                            <div class="card-header">
                                <h3><i class="fas fa-clock"></i> Expired Discounts</h3>
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--warning);" id="expiredDiscounts">0</div>
                            <p style="color: rgba(255,255,255,0.7);">No longer valid</p>
                        </div>
                    </div>

                    <!-- Search Section -->
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-search"></i> Search Discount Codes</h3>
                            <div class="card-tools">
                                <button class="btn btn-primary btn-sm" id="refreshDashboard">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="phoneSearch">Search by Phone Number</label>
                            <div class="input-group">
                                <input type="text" id="phoneSearch" class="form-control" placeholder="Enter 10-digit phone number" />
                                <button id="searchBtn" class="btn btn-primary">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </div>
                        <div id="statusMsg" class="status-msg info-msg" role="status" aria-live="polite" style="display: none;"></div>
                    </div>

                    <!-- Results Section -->
                    <div class="card" id="resultsCard" style="display: none;">
                        <div class="card-header">
                            <h3><i class="fas fa-list"></i> Search Results</h3>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="resultsTable" aria-describedby="resultsSection">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>DOB</th>
                                        <th>Discount</th>
                                        <th>Code</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Discount Codes Page -->
                <div id="discountsPage" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-plus-circle"></i> Generate Single Discount Code</h3>
                        </div>
                        <div class="form-group">
                            <label for="customerName">Customer Name</label>
                            <input type="text" id="customerName" class="form-control" placeholder="Enter customer name" />
                        </div>
                        <div class="form-group">
                            <label for="customerPhone">Phone Number</label>
                            <input type="text" id="customerPhone" class="form-control" placeholder="Enter 10-digit phone number" />
                        </div>
                        <div class="form-group">
                            <label for="customerDOB">Date of Birth (Optional)</label>
                            <input type="date" id="customerDOB" class="form-control" />
                        </div>
                        <div class="form-group">
                            <label for="discountValue">Discount Percentage (%)</label>
                            <input type="number" id="discountValue" class="form-control" placeholder="Enter percentage (0-100)" min="0" max="100" step="1" />
                        </div>
                        <button id="generateCodeBtn" class="btn btn-success">
                            <i class="fas fa-barcode"></i> Generate Code
                        </button>
                        <div id="generatedCodeContainer" style="margin-top: 20px; display: none;">
                            <div class="status-msg success-msg">
                                <i class="fas fa-check-circle"></i> Discount code generated successfully!
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Generated Code</label>
                                <input type="text" id="generatedCode" class="form-control" readonly />
                            </div>
                            <button id="copyCodeBtn" class="btn btn-primary">
                                <i class="fas fa-copy"></i> Copy Code
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-plus-circle"></i> Bulk Generate Discount Codes</h3>
                        </div>
                        <div class="form-group">
                            <label for="bulkQuantity">Number of Codes (1-100)</label>
                            <input type="number" id="bulkQuantity" class="form-control" placeholder="Enter number of codes" min="1" max="100" step="1" />
                        </div>
                        <div class="form-group">
                            <label for="bulkDiscountValue">Discount Percentage (%)</label>
                            <input type="number" id="bulkDiscountValue" class="form-control" placeholder="Enter percentage (0-100)" min="0" max="100" step="1" />
                        </div>
                        <button id="bulkGenerateBtn" class="btn btn-success">
                            <i class="fas fa-barcode"></i> Generate Bulk Codes
                        </button>
                        <div id="bulkGeneratedCodes" style="margin-top: 20px; display: none;">
                            <div class="status-msg success-msg">
                                <i class="fas fa-check-circle"></i> Bulk discount codes generated successfully!
                            </div>
                            <div class="form-group" style="margin-top: 15px;">
                                <label>Generated Codes</label>
                                <textarea id="bulkCodesList" class="form-control" readonly rows="5"></textarea>
                            </div>
                            <button id="copyBulkCodesBtn" class="btn btn-primary">
                                <i class="fas fa-copy"></i> Copy All Codes
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-list"></i> Recent Discount Codes</h3>
                            <div class="card-tools">
                                <button class="btn btn-primary btn-sm" id="refreshDiscounts">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="btn btn-danger btn-sm" id="bulkDeleteBtn" disabled>
                                    <i class="fas fa-trash"></i> Delete Selected
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="discountSearch">Search Discounts</label>
                            <input type="text" id="discountSearch" class="form-control" placeholder="Search by name, phone, or code" />
                        </div>
                        <div class="form-group">
                            <label for="statusFilter">Filter by Status</label>
                            <select id="statusFilter" class="form-control">
                                <option value="all">All</option>
                                <option value="active">Active</option>
                                <option value="used">Used</option>
                                <option value="expired">Expired</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Date Range</label>
                            <div class="input-group">
                                <input type="date" id="dateStart" class="form-control" />
                                <input type="date" id="dateEnd" class="form-control" />
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="discountsTable">
                                <thead>
                                    <tr>
                                        <th><input type="checkbox" id="selectAllDiscounts"></th>
                                        <th data-sort="serial">#</th>
                                        <th data-sort="name">Name</th>
                                        <th data-sort="phone">Phone</th>
                                        <th data-sort="discount">Discount</th>
                                        <th data-sort="code">Code</th>
                                        <th data-sort="status">Status</th>
                                        <th data-sort="date">Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <div class="pagination" id="pagination" style="margin-top: 20px; display: flex; justify-content: center; gap: 10px;">
                            <button class="btn btn-primary btn-sm" id="prevPage" disabled>Previous</button>
                            <span id="pageInfo"></span>
                            <button class="btn btn-primary btn-sm" id="nextPage">Next</button>
                        </div>
                    </div>
                </div>

                <!-- Reminders Page -->
                <div id="remindersPage" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-birthday-cake"></i> Today's Birthdays</h3>
                            <div class="card-tools">
                                <button class="btn btn-primary btn-sm" id="refreshReminders">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="birthdaysTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>DOB</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-bell"></i> Upcoming Birthday Reminders</h3>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="upcomingBirthdaysTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Phone</th>
                                        <th>DOB</th>
                                        <th>Discount Code</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Reports Page -->
                <div id="reportsPage" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-pie"></i> Customer Reports</h3>
                            <div class="card-tools">
                                <button class="btn btn-primary btn-sm" id="refreshReports">
                                    <i class="fas fa-sync-alt"></i> Refresh
                                </button>
                                <button class="btn btn-success btn-sm" id="exportCSV">
                                    <i class="fas fa-download"></i> Export CSV
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Date Range</label>
                            <div class="input-group">
                                <input type="date" id="reportDateStart" class="form-control" />
                                <input type="date" id="reportDateEnd" class="form-control" />
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table" id="reportTable">
                                <thead>
                                    <tr>
                                        <th>Phone</th>
                                        <th>Name</th>
                                        <th>Total Visits</th>
                                        <th>Discounts Used</th>
                                        <th>Codes Generated</th>
                                        <th>Last Visit</th>
                                    </tr>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-chart-line"></i> Usage Analytics</h3>
                        </div>
                        <div style="padding: 20px;">
                            <canvas id="usageChart" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settingsPage" class="page">
                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-cog"></i> System Settings</h3>
                        </div>
                        <div class="form-group">
                            <label>Enable Email Notifications</label>
                            <div style="display: flex; align-items: center; gap: 15px; margin-top: 10px;">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="emailNotifications" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Send email notifications for new codes</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Enable Birthday Reminders</label>
                            <div style="display: flex; align-items: center; gap: 15px; margin-top: 10px;">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="birthdayReminders" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Send automatic birthday discount reminders</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="birthdayMessageTemplate">Birthday Message Template</label>
                            <textarea id="birthdayMessageTemplate" class="form-control" rows="4">Happy Birthday, {name}! Celebrate with us at Deccan Palm and enjoy a {discount} discount with code {code}. Valid for 7 days!</textarea>
                        </div>
                        <div class="form-group">
                            <label>Require DOB for Discounts</label>
                            <div style="display: flex; align-items: center; gap: 15px; margin-top: 10px;">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="requireDOB">
                                    <span class="toggle-slider"></span>
                                </label>
                                <span>Make date of birth mandatory</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Default Discount Range (%)</label>
                            <div class="input-group">
                                <input type="number" id="discountRangeFrom" class="form-control" placeholder="From (0-100)" min="0" max="100" step="1" value="1" />
                                <input type="number" id="discountRangeTo" class="form-control" placeholder="To (0-100)" min="0" max="100" step="1" value="10" />
                            </div>
                        </div>
                        <button id="saveSettingsBtn" class="btn btn-success">
                            <i class="fas fa-save"></i> Save Settings
                        </button>
                        <div id="settingsStatus" class="status-msg" style="display: none; margin-top: 15px;"></div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3><i class="fas fa-user-shield"></i> Admin Settings</h3>
                        </div>
                        <div class="form-group">
                            <label for="adminEmail">Admin Email</label>
                            <input type="email" id="adminEmail" class="form-control" placeholder="admin@example.com" />
                        </div>
                        <div class="form-group">
                            <label for="adminPassword">Change Password</label>
                            <input type="password" id="adminPassword" class="form-control" placeholder="Enter new password" />
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Confirm Password</label>
                            <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm new password" />
                        </div>
                        <button id="updateAdminBtn" class="btn btn-primary">
                            <i class="fas fa-user-edit"></i> Update Admin
                        </button>
                    </div>
                </div>

                <!-- Logout Button -->
                <button id="logoutBtn" class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </main>
        </div>
    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
